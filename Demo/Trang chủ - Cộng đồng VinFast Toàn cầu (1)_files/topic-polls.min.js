!function(o,e,t,l){e.wp=e.wp||{},e.wp.gdpol=e.wp.gdpol||{},e.wp.gdpol.form={base:"#gdpol-form-",run:function(e){var t=wp.gdpol.form.base+e,l=JSON.parse(o(".gdpol-poll-settings",o(t)).html());o("form",o(t)).data("gdpol",l),"single"!==l.choice&&0<l.limit&&o("input[type=checkbox]",o(t)).change(function(){o("input[type=checkbox]:checked",o(t)).length>=l.limit?o("input[type=checkbox]:not(:checked)").prop("disabled",!0):o("input[type=checkbox]").prop("disabled",!1)}),o("form",o(t)).submit(function(){var e=!1;return 1===o("button",o(t)).length&&("single"===l.choice?1===o("input[type=radio]:checked",o(t)).length&&(e=!0):0<o("input[type=checkbox]:checked",o(t)).length&&(e=!0)),e})}},e.wp.gdpol.edit={id:1,seq:1,tpl:"",run:function(e,t){wp.gdpol.edit.seq=e,wp.gdpol.edit.id=t,wp.gdpol.edit.controls(),wp.gdpol.edit.datetime(),wp.gdpol.edit.responses(),wp.gdpol.edit.validate()},datetime:function(){var e={enableTime:!0,enableSeconds:!0,altInput:!0,dateFormat:"Y-m-d H:i:S"};""!==gdpol_polls_data.flatpickr_locale&&(e.locale=gdpol_polls_data.flatpickr_locale),o(".gdpol-end-datetime").flatpickr(e)},controls:function(){o(t).on("change",".gdpol-field-extra-select",function(){var e=o(this).data("field"),t=o(this).val();o("."+e+"-field:not(."+e+"-"+t).slideUp("fast"),o("."+e+"-"+t).slideDown("slow")}),o(t).on("change",".gdpol-poll-status",function(){o(this).is(":checked")?o(".gdpol-fields-wrapper").slideDown("slow"):o(".gdpol-fields-wrapper").slideUp("fast")})},responses:function(){wp.gdpol.edit.tpl=o("#gdpol-response-item-template").html(),o(t).on("click",".gdpol-responses-list ._minus button",function(e){e.preventDefault(),o(this).closest("li").fadeOut("slow",function(){o(this).remove(),o(".gdpol-responses-list li").length<2&&wp.gdpol.edit.add_response()})}),o(t).on("click",".gdpol-responses-list ._down button",function(e){e.preventDefault();var t=o(this).closest("li");t.insertAfter(t.next())}),o(t).on("click",".gdpol-responses-list ._up button",function(e){e.preventDefault();var t=o(this).closest("li");t.insertBefore(t.prev())}),o(t).on("click",".gdpol-new-response",function(e){e.preventDefault(),wp.gdpol.edit.add_response()})},add_response:function(){wp.gdpol.edit.id++,wp.gdpol.edit.seq++;var e="<li>"+wp.gdpol.edit.tpl+"</li>";e=(e=(e=e.replace(/{{SEQID}}/gi,wp.gdpol.edit.seq)).replace(/{{RESID}}/gi,wp.gdpol.edit.id)).replace(/{{RESPONSE}}/gi,""),o(".gdpol-field-responses ul").append(e)},validate:function(){o("#new-post").submit(wp.gdpol.edit.check)},check:function(){var e=!0;if(o(".gdpol-poll-status").is(":checked"))if(""===o(".gdpol-poll-question").val())e=!1,alert(gdpol_polls_data.error_question);else{var t=0;o(".gdpol-responses-list ._label input").each(function(){""!==o(this).val()&&t++}),t<2&&(e=!1,alert(gdpol_polls_data.error_responses))}return e}}}(jQuery,window,document);